<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Highmaps Example</title>

		<style type="text/css">
* {
    font-family:
        -apple-system,
        BlinkMacSystemFont,
        "Segoe UI",
        Roboto,
        Helvetica,
        Arial,
        "Apple Color Emoji",
        "Segoe UI Emoji",
        "Segoe UI Symbol",
        sans-serif;
}

#container {
    max-width: 400px;
    height: 360px;
    margin: 0 auto;
}

#table-div {
    max-width: 400px;
    margin: 3em auto;
}

		</style>
	</head>
	<body>
<script src="../../code/highmaps.js"></script>
<script src="../../code/modules/data.js"></script>
<script src="../../code/modules/exporting.js"></script>
<script src="../../code/modules/offline-exporting.js"></script>
<script src="../../code/modules/accessibility.js"></script>

<div id="container"></div>
<div id="table-div">
    <table id="data">
        <tr>
            <td>1</td>
            <td>NORTH DAKOTA</td>
            <td>2.0</td>
        </tr>
        <tr>
            <td>1</td>
            <td>SOUTH DAKOTA</td>
            <td>2.0</td>
        </tr>
        <tr>
            <td>3</td>
            <td>VERMONT</td>
            <td>2.1</td>
        </tr>
        <tr>
            <td>4</td>
            <td>NEBRASKA</td>
            <td>2.5</td>
        </tr>
        <tr>
            <td>4</td>
            <td>NEW HAMPSHIRE</td>
            <td>2.5</td>
        </tr>
        <tr>
            <td>6</td>
            <td>MARYLAND</td>
            <td>2.7</td>
        </tr>
        <tr>
            <td>6</td>
            <td>VIRGINIA</td>
            <td>2.7</td>
        </tr>
        <tr>
            <td>8</td>
            <td>IOWA</td>
            <td>2.8</td>
        </tr>
        <tr>
            <td>8</td>
            <td>MINNESOTA</td>
            <td>2.8</td>
        </tr>
        <tr>
            <td>8</td>
            <td>MISSISSIPPI</td>
            <td>2.8</td>
        </tr>
        <tr>
            <td>11</td>
            <td>KANSAS</td>
            <td>2.9</td>
        </tr>
        <tr>
            <td>11</td>
            <td>UTAH</td>
            <td>2.9</td>
        </tr>
        <tr>
            <td>11</td>
            <td>WISCONSIN</td>
            <td>2.9</td>
        </tr>
        <tr>
            <td>11</td>
            <td>WYOMING</td>
            <td>2.9</td>
        </tr>
        <tr>
            <td>15</td>
            <td>ALABAMA</td>
            <td>3.0</td>
        </tr>
        <tr>
            <td>15</td>
            <td>HAWAII</td>
            <td>3.0</td>
        </tr>
        <tr>
            <td>15</td>
            <td>MAINE</td>
            <td>3.0</td>
        </tr>
        <tr>
            <td>15</td>
            <td>MASSACHUSETTS</td>
            <td>3.0</td>
        </tr>
        <tr>
            <td>15</td>
            <td>TENNESSEE</td>
            <td>3.0</td>
        </tr>
        <tr>
            <td>20</td>
            <td>MONTANA</td>
            <td>3.1</td>
        </tr>
        <tr>
            <td>21</td>
            <td>GEORGIA</td>
            <td>3.2</td>
        </tr>
        <tr>
            <td>22</td>
            <td>FLORIDA</td>
            <td>3.3</td>
        </tr>
        <tr>
            <td>22</td>
            <td>IDAHO</td>
            <td>3.3</td>
        </tr>
        <tr>
            <td>24</td>
            <td>ARIZONA</td>
            <td>3.4</td>
        </tr>
        <tr>
            <td>24</td>
            <td>ARKANSAS</td>
            <td>3.4</td>
        </tr>
        <tr>
            <td>24</td>
            <td>PENNSYLVANIA</td>
            <td>3.4</td>
        </tr>
        <tr>
            <td>24</td>
            <td>SOUTH CAROLINA</td>
            <td>3.4</td>
        </tr>
        <tr>
            <td>28</td>
            <td>MISSOURI</td>
            <td>3.5</td>
        </tr>
        <tr>
            <td>28</td>
            <td>OKLAHOMA</td>
            <td>3.5</td>
        </tr>
        <tr>
            <td>30</td>
            <td>NORTH CAROLINA</td>
            <td>3.6</td>
        </tr>
        <tr>
            <td>31</td>
            <td>INDIANA</td>
            <td>3.7</td>
        </tr>
        <tr>
            <td>32</td>
            <td>COLORADO</td>
            <td>3.8</td>
        </tr>
        <tr>
            <td>32</td>
            <td>NEW MEXICO</td>
            <td>3.8</td>
        </tr>
        <tr>
            <td>34</td>
            <td>DELAWARE</td>
            <td>3.9</td>
        </tr>
        <tr>
            <td>34</td>
            <td>MICHIGAN</td>
            <td>3.9</td>
        </tr>
        <tr>
            <td>36</td>
            <td>TEXAS</td>
            <td>4.0</td>
        </tr>
        <tr>
            <td>37</td>
            <td>LOUISIANA</td>
            <td>4.1</td>
        </tr>
        <tr>
            <td>38</td>
            <td>NEW YORK</td>
            <td>4.2</td>
        </tr>
        <tr>
            <td>38</td>
            <td>OHIO</td>
            <td>4.2</td>
        </tr>
        <tr>
            <td>38</td>
            <td>OREGON</td>
            <td>4.2</td>
        </tr>
        <tr>
            <td>38</td>
            <td>WEST VIRGINIA</td>
            <td>4.2</td>
        </tr>
        <tr>
            <td>42</td>
            <td>CONNECTICUT</td>
            <td>4.3</td>
        </tr>
        <tr>
            <td>42</td>
            <td>RHODE ISLAND</td>
            <td>4.3</td>
        </tr>
        <tr>
            <td>44</td>
            <td>ALASKA</td>
            <td>4.5</td>
        </tr>
        <tr>
            <td>45</td>
            <td>KENTUCKY</td>
            <td>4.6</td>
        </tr>
        <tr>
            <td>45</td>
            <td>NEW JERSEY</td>
            <td>4.6</td>
        </tr>
        <tr>
            <td>47</td>
            <td>ILLINOIS</td>
            <td>4.9</td>
        </tr>
        <tr>
            <td>47</td>
            <td>WASHINGTON</td>
            <td>4.9</td>
        </tr>
        <tr>
            <td>49</td>
            <td>NEVADA</td>
            <td>5.1</td>
        </tr>
        <tr>
            <td>50</td>
            <td>CALIFORNIA</td>
            <td>5.2</td>
        </tr>
        <tr>
            <td>51</td>
            <td>DISTRICT OF COLUMBIA</td>
            <td>5.3</td>
        </tr>
    </table>
</div>



		<script type="text/javascript">
// Source: https://www.bls.gov/web/laus/laumstrk.htm

(async () => {

    const topology = await fetch(
        'https://code.highcharts.com/mapdata/countries/us/custom/us-small.topo.json'
    ).then(response => response.json());

    // Load the data from the HTML table and tag it with an upper case name used
    // for joining
    const data = [];

    Highcharts.data({
        table: document.getElementById('data'),
        startColumn: 1,
        firstRowAsNames: false,
        complete: function (options) {
            options.series[0].data.forEach(function (p) {
                data.push({
                    ucName: p[0],
                    value: p[1]
                });
            });
        }
    });

    // Prepare map data for joining
    topology.objects.default.geometries.forEach(function (g) {
        if (g.properties && g.properties.name) {
            g.properties.ucName = g.properties.name.toUpperCase();
        }
    });

    // Initialize the chart
    Highcharts.mapChart('container', {

        title: {
            text: 'US unemployment rate in May 2024',
            align: 'left'
        },

        subtitle: {
            text: 'Small US map with data labels',
            align: 'left'
        },

        mapNavigation: {
            enabled: true,
            enableButtons: false
        },

        xAxis: {
            labels: {
                enabled: false
            }
        },

        colorAxis: {
            labels: {
                format: '{value}%'
            },
            stops: [
                [0.2, '#188e2a'], // Green
                [0.6, '#fee401'], // Yellow
                [1, '#df1309'] // Red
            ],
            min: 0,
            max: 6
        },

        series: [{
            mapData: topology,
            data,
            joinBy: 'ucName',
            name: 'Unemployment rate per 2024',
            dataLabels: {
                enabled: true,
                format: '{point.properties.hc-a2}',
                style: {
                    fontSize: '10px'
                }
            },
            tooltip: {
                valueSuffix: '%'
            }
        }, {
        // The connector lines
            type: 'mapline',
            data: Highcharts.geojson(topology, 'mapline'),
            color: 'silver',
            accessibility: {
                enabled: false
            }
        }]
    });

})();

		</script>
	</body>
</html>
