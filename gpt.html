<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filter Page</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">

    <!-- Optional CSS for Styling -->
    <style>
        .filter-chip {
            display: inline-block;
            padding: 5px 10px;
            margin: 5px;
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .filter-chip .remove-btn {
            margin-left: 10px;
            color: red;
            cursor: pointer;
            border: none;
            background: none;
        }
    </style>
</head>
<body>
    <div class="menu-block customscroll">
        <div class="sidebar-menu">
            <div class="">
                <div class="pd-20 pt-10 height-100-p d-flex flex-column align-items-start" style="margin-top: 50px;">
                    <!-- Filter Section -->
                    <div class="filter-section w-100">
                        <h5 class="text-visible pb-2">Filter Options</h5>
                        <form id="filter-form">
                            <!-- Date Filters -->
                            <div class="d-flex flex-column gap-2 mt-2">
                                <label class="text-visible" for="from-date">From Date</label>
                                <input type="date" id="from-date" name="from_date" class="form-control mb-2">

                                <label class="text-visible mt-3" for="to-date">To Date</label>
                                <input type="date" id="to-date" name="to_date" class="form-control mb-3">
                            </div>

                            <!-- Filter Option 1 -->
                            <div class="form-group">
                                <label class="text-visible" for="dropdown1">Number of rooms</label>
                                <select class="form-control filter" id="dropdown1" name="number_of_rooms">
                                    <option value="" disabled selected>Select number of rooms</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                </select>
                            </div>

                            <!-- Filter Option 2 -->
                            <div class="form-group">
                                <label class="text-visible" for="dropdown2">Total floors</label>
                                <select class="form-control filter" id="dropdown2" name="total_floors">
                                    <option value="" disabled selected>Select total floors</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                </select>
                            </div>

                            <!-- Filter Option 3 -->
                            <div class="form-group">
                                <label class="text-visible" for="dropdown3">Floors</label>
                                <select class="form-control filter" id="dropdown3" name="floors">
                                    <option value="" disabled selected>Select floors</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                </select>
                            </div>

                            <!-- Filter Option 4 -->
                            <div class="form-group">
                                <label class="text-visible" for="dropdown4">Type of market</label>
                                <select class="form-control filter" id="dropdown4" name="type_of_market">
                                    <option value="" disabled selected>Select type of market</option>
                                    <option value="Market 1">Market 1</option>
                                    <option value="Market 2">Market 2</option>
                                    <option value="Market 3">Market 3</option>
                                </select>
                            </div>

                            <!-- Selected Filters Section -->
                            <div class="selected-filters mt-3" id="selected-filters">
                                <!-- Dynamically added filter chips will appear here -->
                            </div>

                            <!-- Reset Button -->
                            <button class="btn btn-danger w-100 mt-3 text-visible" id="reset-button" type="button">
                                Reset Filters
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const filterForm = document.getElementById('filter-form');
            const selectedFiltersContainer = document.getElementById('selected-filters');
            const resetButton = document.getElementById('reset-button');

            // Event listener for adding filters
            filterForm.addEventListener('change', function(event) {
                const field = event.target;
                if (field.tagName === 'SELECT' && field.value) {
                    addFilterChip(field);
                }
            });

            // Function to add filter chip
            function addFilterChip(field) {
                const existingChip = selectedFiltersContainer.querySelector(`[data-id="${field.id}"]`);
                if (!existingChip) {
                    const chip = document.createElement('div');
                    chip.className = 'filter-chip';
                    chip.dataset.id = field.id;
                    chip.innerHTML = `${field.options[field.selectedIndex].text} <button class="remove-btn">X</button>`;

                    chip.querySelector('.remove-btn').addEventListener('click', () => {
                        field.value = '';
                        selectedFiltersContainer.removeChild(chip);
                    });

                    selectedFiltersContainer.appendChild(chip);
                }
            }

            // Event listener for resetting all filters
            resetButton.addEventListener('click', () => {
                filterForm.reset();
                selectedFiltersContainer.innerHTML = '';
            });
        });
    </script>
</body>
</html>
